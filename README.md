# üè¶ Sistema de An√°lise de Cart√£o com Azure AI# Sistema de An√°lise de Cart√µes com Azure



[![Python](https://img.shields.io/badge/python-3.8%2B-blue.svg)](https://python.org)Um sistema completo em Python para an√°lise de cart√µes de cr√©dito/d√©bito usando APIs do Azure Cognitive Services.

[![Azure](https://img.shields.io/badge/Azure-Computer%20Vision-0078d4.svg)](https://azure.microsoft.com/services/cognitive-services/computer-vision/)

[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)## üöÄ Funcionalidades

[![Status](https://img.shields.io/badge/status-Active-success.svg)](https://github.com/seu-usuario/card-analyzer)

- **OCR Avan√ßado**: Extra√ß√£o de texto usando Azure Computer Vision

Sistema inteligente para an√°lise e valida√ß√£o de cart√µes de cr√©dito usando Azure Computer Vision e algoritmos de valida√ß√£o padr√£o da ind√∫stria.- **An√°lise Estruturada**: Processamento de documentos com Azure Form Recognizer

- **Valida√ß√£o Inteligente**: Sistema de valida√ß√£o com algoritmo de Luhn

## üöÄ Funcionalidades- **API Web**: Interface REST completa com FastAPI

- **M√∫ltiplos M√©todos**: Form Recognizer, OCR ou ambos combinados

### üìù Valida√ß√£o Manual- **Relat√≥rios Detalhados**: Gera√ß√£o autom√°tica de relat√≥rios

- **Algoritmo de Luhn**: Valida√ß√£o matem√°tica do n√∫mero do cart√£o- **An√°lise de Confian√ßa**: Sistema de scoring para qualidade dos resultados

- **Valida√ß√£o de CVV**: Verifica√ß√£o baseada no tipo do cart√£o

- **Data de Expira√ß√£o**: Valida√ß√£o de formato e vencimento## üìã Pr√©-requisitos

- **Identifica√ß√£o de Bandeira**: Visa, Mastercard, American Express, Discover

### Servi√ßos Azure Necess√°rios

### ü§ñ An√°lise com Azure AI

- **Computer Vision**: Extra√ß√£o autom√°tica de texto da imagem1. **Azure Computer Vision**

- **OCR Inteligente**: Reconhecimento √≥ptico de caracteres   - Endpoint e chave de API

- **An√°lise de Confian√ßa**: Pontua√ß√£o de precis√£o da extra√ß√£o   - Para funcionalidades de OCR

- **Suporte Multi-formato**: JPG, PNG, WEBP

2. **Azure Form Recognizer** (recomendado)

### üåê Interface Web   - Endpoint e chave de API

- **Design Responsivo**: Funciona em desktop e mobile   - Para an√°lise estruturada de documentos

- **Upload por Drag & Drop**: Interface intuitiva

- **Resultados em Tempo Real**: Feedback instant√¢neo### Software

- **API REST**: Endpoints para integra√ß√£o

- Python 3.8 ou superior

## üõ†Ô∏è Instala√ß√£o- pip (gerenciador de pacotes Python)



### Pr√©-requisitos## üõ†Ô∏è Instala√ß√£o

- Python 3.8 ou superior

- Conta Azure com Computer Vision configurado (opcional)### 1. Clone o projeto

- Git```bash

git clone <seu-repositorio>

### 1. Clonar o reposit√≥riocd dio-doudge

```bash```

git clone https://github.com/seu-usuario/card-analyzer.git

cd card-analyzer### 2. Instale as depend√™ncias

``````bash

pip install -r requirements.txt

### 2. Criar ambiente virtual```

```bash

# Windows### 3. Configure as vari√°veis de ambiente

python -m venv venv

venv\\Scripts\\activateCopie o arquivo de exemplo:

```bash

# Linux/macOScopy .env.example .env

python3 -m venv venv```

source venv/bin/activate

```Edite o arquivo `.env` com suas credenciais do Azure:

```env

### 3. Instalar depend√™ncias# Configura√ß√µes do Azure Computer Vision

```bashAZURE_COMPUTER_VISION_ENDPOINT=https://sua-regiao.cognitiveservices.azure.com/

pip install -r requirements.txtAZURE_COMPUTER_VISION_KEY=sua_chave_computer_vision

```

# Configura√ß√µes do Azure Form Recognizer

### 4. Configurar Azure (Opcional)AZURE_FORM_RECOGNIZER_ENDPOINT=https://sua-regiao.cognitiveservices.azure.com/

```bashAZURE_FORM_RECOGNIZER_KEY=sua_chave_form_recognizer

# Copiar arquivo de exemplo

cp .env.example .env# Configura√ß√µes opcionais

DEBUG=True

# Editar com suas credenciais```

# AZURE_COMPUTER_VISION_ENDPOINT=https://sua-instancia.cognitiveservices.azure.com/

# AZURE_COMPUTER_VISION_KEY=sua-chave-aqui## üéØ Como Usar

```

### Linha de Comando

### 5. Executar o sistema

```bash#### Analisar um √∫nico cart√£o

python app.py```bash

```python main.py caminho/para/imagem.jpg --method form_recognizer --report

```

Acesse: http://localhost:8000

#### Analisar m√∫ltiplos cart√µes

## üîß Configura√ß√£o do Azure```bash

python main.py imagem1.jpg imagem2.jpg imagem3.jpg --method both --output resultados.json

### Criando o recurso Azure Computer Vision```



1. **Azure Portal**: Acesse [portal.azure.com](https://portal.azure.com)#### Op√ß√µes dispon√≠veis

2. **Criar Recurso**: Busque por "Computer Vision" e configure- `--method`: M√©todo de an√°lise (`form_recognizer`, `ocr`, `both`)

3. **Obter Credenciais**: Copie Endpoint e Chave- `--output`: Arquivo de sa√≠da para resultados JSON

4. **Configurar**: Adicione no arquivo `.env`- `--report`: Gera relat√≥rio textual adicional



### Vari√°veis de Ambiente### API Web



```env#### Iniciar o servidor

AZURE_COMPUTER_VISION_ENDPOINT=https://sua-instancia.cognitiveservices.azure.com/```bash

AZURE_COMPUTER_VISION_KEY=sua-chave-de-32-caracterespython api.py

PORT=8000```

```

O servidor estar√° dispon√≠vel em: `http://localhost:8000`

## üìö Como Usar

#### Documenta√ß√£o da API

### 1. Valida√ß√£o ManualAcesse: `http://localhost:8000/docs` (Swagger UI)

1. Acesse a aba "Valida√ß√£o Manual"

2. Preencha os dados do cart√£o#### Endpoints principais

3. Clique em "Validar Cart√£o"

4. Veja os resultados da valida√ß√£o**An√°lise de cart√£o √∫nico:**

```bash

### 2. An√°lise de Imagem  curl -X POST "http://localhost:8000/analyze/single" \

1. Acesse a aba "An√°lise de Imagem"     -H "Content-Type: multipart/form-data" \

2. Fa√ßa upload da foto do cart√£o     -F "file=@cartao.jpg" \

3. Clique em "Analisar com Azure AI"     -F "method=form_recognizer" \

4. Veja os dados extra√≠dos e validados     -F "generate_report=true"

```

### 3. API REST

**An√°lise de m√∫ltiplos cart√µes:**

#### Valida√ß√£o Manual```bash

```bashcurl -X POST "http://localhost:8000/analyze/multiple" \

curl -X POST http://localhost:8000/validate \     -H "Content-Type: multipart/form-data" \

  -H "Content-Type: application/json" \     -F "files=@cartao1.jpg" \

  -d '{     -F "files=@cartao2.jpg" \

    "cardNumber": "4532 1234 5678 9012",     -F "method=both"

    "expiryDate": "12/28",```

    "cvv": "123",

    "holderName": "Jo√£o Silva"### Uso Program√°tico

  }'

``````python

from main import CardAnalysisSystem

#### Upload de Imagem

```bash# Inicializa o sistema

curl -X POST http://localhost:8000/upload-image \system = CardAnalysisSystem()

  -F "image=@caminho/para/imagem.jpg"

```# Analisa um cart√£o

results = system.analyze_card_image('caminho/para/cartao.jpg', method='form_recognizer')

## üß™ Exemplos de Teste

# Verifica se foi bem-sucedido

### Cart√µes V√°lidosif results['success']:

- **Visa**: `4532 1234 5678 9012` CVV: `123` Data: `12/28`    card_data = results['card_data']

- **Mastercard**: `5555 5555 5555 4444` CVV: `456` Data: `11/27`      print(f"N√∫mero: {card_data.get('card_number')}")

- **Amex**: `3782 822463 10005` CVV: `1234` Data: `08/26`    print(f"Nome: {card_data.get('cardholder_name')}")

    print(f"Expira√ß√£o: {card_data.get('expiry_date')}")

## üèóÔ∏è Arquitetura    print(f"Confian√ßa: {results['confidence_analysis']['overall_confidence']:.2f}")

else:

```    print(f"Erro: {results.get('error')}")

card-analyzer/```

‚îú‚îÄ‚îÄ app.py              # Aplica√ß√£o principal

‚îú‚îÄ‚îÄ requirements.txt    # Depend√™ncias## üìä M√©todos de An√°lise

‚îú‚îÄ‚îÄ .env.example       # Configura√ß√£o exemplo

‚îú‚îÄ‚îÄ README.md          # Esta documenta√ß√£o### 1. Form Recognizer (Recomendado)

‚îî‚îÄ‚îÄ .gitignore         # Arquivos ignorados- Usa modelos pr√©-treinados do Azure

```- Melhor precis√£o para documentos estruturados

- Extra√ß√£o autom√°tica de campos espec√≠ficos

## üîç Algoritmos

### 2. OCR (Computer Vision)

### Algoritmo de Luhn- Extra√ß√£o de texto puro

Valida√ß√£o matem√°tica para n√∫meros de cart√£o:- Processamento com detec√ß√£o de regi√µes

1. Multiplica d√≠gitos em posi√ß√µes pares por 2- √ötil para casos complexos

2. Subtrai 9 se resultado > 9

3. Soma todos os d√≠gitos### 3. Both (Combinado)

4. V√°lido se soma √© m√∫ltiplo de 10- Usa ambos os m√©todos

- Combina resultados para m√°xima precis√£o

## üöÄ Deploy- Recomendado para casos cr√≠ticos



### Heroku## üîç Valida√ß√µes Implementadas

```bash

heroku create meu-card-analyzer### N√∫mero do Cart√£o

heroku config:set AZURE_COMPUTER_VISION_ENDPOINT=https://...- Verifica√ß√£o de formato (13-19 d√≠gitos)

heroku config:set AZURE_COMPUTER_VISION_KEY=abc123...- Algoritmo de Luhn

git push heroku main- Identifica√ß√£o do tipo de cart√£o (Visa, Mastercard, etc.)

```

### Nome do Portador

## ü§ù Contribuindo- Valida√ß√£o de caracteres permitidos

- Verifica√ß√£o de completude

1. Fork o projeto- Detec√ß√£o de nomes gen√©ricos

2. Crie uma branch (`git checkout -b feature/AmazingFeature`)

3. Commit suas mudan√ßas (`git commit -m 'Add AmazingFeature'`)### Data de Expira√ß√£o

4. Push para a branch (`git push origin feature/AmazingFeature`)- M√∫ltiplos formatos suportados (MM/YY, MM/YYYY)

5. Abra um Pull Request- Verifica√ß√£o de validade temporal

- Alertas de expira√ß√£o pr√≥xima

## ‚ö†Ô∏è Limita√ß√µes

## üìà Sistema de Confian√ßa

- **Seguran√ßa**: N√£o armazena dados de cart√£o

- **Demonstra√ß√£o**: Para fins educacionaisO sistema calcula scores de confian√ßa baseados em:

- **Azure**: Limitado pela qualidade da imagem

- **Compliance**: Implemente PCI DSS para produ√ß√£o- **Qualidade do OCR**: Confian√ßa individual de cada campo

- **Valida√ß√µes**: Sucesso nas verifica√ß√µes

## üìÑ Licen√ßa- **Consist√™ncia**: Coer√™ncia entre dados extra√≠dos

- **Completude**: Presen√ßa de campos essenciais

Este projeto est√° licenciado sob a Licen√ßa MIT - veja o arquivo [LICENSE](LICENSE) para detalhes.

### N√≠veis de Confian√ßa

## üôè Agradecimentos- **Muito Alta (‚â•0.9)**: Dados altamente confi√°veis

- **Alta (‚â•0.7)**: Dados confi√°veis

- Microsoft Azure - Computer Vision API- **M√©dia (‚â•0.5)**: Dados aceit√°veis, revis√£o recomendada

- Python Community - Ferramentas e bibliotecas- **Baixa (‚â•0.3)**: Dados duvidosos, revis√£o necess√°ria

- Contributors - Todos que ajudaram no projeto- **Muito Baixa (<0.3)**: Dados n√£o confi√°veis



---## üìÅ Estrutura do Projeto



<div align="center">```

dio-doudge/

**Desenvolvido com ‚ù§Ô∏è usando Python e Azure AI**‚îú‚îÄ‚îÄ card_analyzer/          # M√≥dulos principais

‚îÇ   ‚îú‚îÄ‚îÄ __init__.py

[‚≠ê Estrele este reposit√≥rio](https://github.com/seu-usuario/card-analyzer) | [üêõ Reporte um bug](https://github.com/seu-usuario/card-analyzer/issues)‚îÇ   ‚îú‚îÄ‚îÄ ocr_processor.py    # Azure Computer Vision OCR

‚îÇ   ‚îú‚îÄ‚îÄ document_analyzer.py # Azure Form Recognizer

</div>‚îÇ   ‚îî‚îÄ‚îÄ validator.py        # Sistema de valida√ß√£o
‚îú‚îÄ‚îÄ config/                 # Configura√ß√µes
‚îÇ   ‚îî‚îÄ‚îÄ settings.py
‚îú‚îÄ‚îÄ tests/                  # Testes unit√°rios
‚îú‚îÄ‚îÄ sample_images/          # Imagens de exemplo
‚îú‚îÄ‚îÄ uploads/               # Upload tempor√°rio (criado automaticamente)
‚îú‚îÄ‚îÄ temp/                  # Arquivos tempor√°rios
‚îú‚îÄ‚îÄ results/               # Resultados salvos
‚îú‚îÄ‚îÄ main.py                # Aplica√ß√£o principal
‚îú‚îÄ‚îÄ api.py                 # API Web FastAPI
‚îú‚îÄ‚îÄ requirements.txt       # Depend√™ncias
‚îú‚îÄ‚îÄ .env.example          # Exemplo de configura√ß√£o
‚îî‚îÄ‚îÄ README.md             # Esta documenta√ß√£o
```

## üß™ Testes

Execute os testes unit√°rios:
```bash
pytest tests/
```

Para testes com cobertura:
```bash
pytest tests/ --cov=card_analyzer --cov-report=html
```

## üîß Configura√ß√£o Avan√ßada

### Personaliza√ß√£o de Valida√ß√£o

Edite `card_analyzer/validator.py` para:
- Adicionar novos tipos de cart√£o
- Modificar regras de valida√ß√£o
- Personalizar mensagens de erro

### Otimiza√ß√£o de Performance

No arquivo `config/settings.py`:
```python
# Timeout para APIs Azure
azure_timeout: int = 30

# Tamanho m√°ximo de arquivo
max_file_size: int = 10 * 1024 * 1024  # 10MB
```

## üö® Solu√ß√£o de Problemas

### Erro de Autentica√ß√£o Azure
```
Verifique se:
- As chaves est√£o corretas no arquivo .env
- Os endpoints est√£o no formato correto
- Os servi√ßos est√£o ativos na sua conta Azure
```

### Erro de Depend√™ncias
```bash
# Reinstale as depend√™ncias
pip uninstall -r requirements.txt -y
pip install -r requirements.txt
```

### Problemas de OCR
```
- Verifique a qualidade da imagem
- Certifique-se de que o texto est√° leg√≠vel
- Teste com diferentes m√©todos de an√°lise
```

## üìù Logs

O sistema gera logs detalhados em:
- Console (para desenvolvimento)
- Arquivo `card_analyzer.log`

Para ajustar o n√≠vel de log, modifique em `main.py`:
```python
logging.basicConfig(level=logging.DEBUG)  # Para mais detalhes
```

## ü§ù Contribui√ß√£o

1. Fork o projeto
2. Crie uma branch para sua feature (`git checkout -b feature/AmazingFeature`)
3. Commit suas mudan√ßas (`git commit -m 'Add some AmazingFeature'`)
4. Push para a branch (`git push origin feature/AmazingFeature`)
5. Abra um Pull Request

## üìÑ Licen√ßa

Este projeto est√° sob a licen√ßa MIT. Veja o arquivo `LICENSE` para detalhes.

## üÜò Suporte

Para suporte e d√∫vidas:
- Abra uma issue no GitHub
- Consulte a documenta√ß√£o da API em `/docs`
- Verifique os logs para diagn√≥stico

## üîó Links √öteis

- [Azure Computer Vision](https://docs.microsoft.com/en-us/azure/cognitive-services/computer-vision/)
- [Azure Form Recognizer](https://docs.microsoft.com/en-us/azure/cognitive-services/form-recognizer/)
- [FastAPI Documentation](https://fastapi.tiangolo.com/)
- [Python Official Documentation](https://docs.python.org/3/)

---

**Desenvolvido com ‚ù§Ô∏è para an√°lise inteligente de cart√µes**